# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Задание

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информацию о сбое можно изучить по ссылкам ниже:

* [краткое описание на русском языке](https://habr.com/ru/post/427301/);
* [развёрнутое описание на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

## Решение

### Постмортем

1. Краткое описание инцидента
GitHub столкнулся с серьезным инцидентом, который привел к снижению качества обслуживания в течение суток. Несколько внутренних систем отображали устаревшую и несогласованную информацию. 

2. Причина инцидента
Инцидент был вызван плавновым техническим обслуживанием (замена оптического оборудования), в ходе которого произошла потеря связи между сетевым узлом на восточном побережье США и основным центром обработки данных. Это привело к цепной реакции, включая проблемы с репликацией базы данных между двумя центрами обработки данных, что в конечном итоге привело к длительному сбою.

3. Воздействие
Пользователи столкнулись с недоступностью или замедленной работой сервисов GitHub в течение 24 часов 11 минут. Компании, зависящие от GitHub, испытали задержки в разработке и развертывании ПО. Инцидент негативно сказался на доверии пользователей к надежности платформы.

4. Обнаружение
Сбой был обнаружен системой мониторинга GitHub, которая зарегистрировала множество ошибок и снижение производительности. Инженеры немедленно начали расследование.

5. Реакция
Команда GitHub быстро собралась для анализа ситуации. Были предприняты шаги по изоляции проблемных сегментов базы данных и восстановлению работоспособности системы.

6. Восстановление
Инженеры выполнили следующие действия:
- Откатили изменения, которые привели к сбою.
- Провели диагностику и восстановление поврежденных данных.
- Постепенно восстановили доступ к сервису для пользователей.

7. Таймлайн
21 октября 22:52: Начало сбоя
21 октября 22:54: Система мониторинга начала регистрировать события, связанные со сбоем
21 октября 23:02: Конфигурация кластеров баз данных находится в не штатном состоянии 
21 октября 23:07: Команда реагирования вручную заблокировала внутренние инструменты развёртывания
21 октября 23:09: Команда реагирования перевела сайт в жёлтый статус
21 октября 23:11: Координатор инцидента изменил статус на красный
21 октября 23:13: Привелечение инженеров из команды разработчиков баз данных GitHub
21 октября 23:19: Остановка отправки веб-перехватчиков и сборки страниц GitHub
22 октября 00:05: Начало разработки плана устранения несоответствий в данных и реализации процедур аварийного переключения для MySQL
22 октября 00:41: Запущен процесс восстановления данных из резервных копий для всех затронутых кластеров MySQL
22 октября 06:51: Несколько кластеров завершили восстановление из резервных копий. Начало репликации новых данных с ЦОД Западного побережья
22 октября 07:46: GitHub опубликовал пост в блоге о состоянии сервисов
22 октября 11:12: Базы данных в основном ЦОД были восстановлены. Продолжается репликация баз данных 
22 октября 13:15: Возникла пиковая нагрузка на GitHub.com. Создание дополнительных реплик MySQL для чтения и снижения нагрузки. Ускорение репликации
22 октября 16:24: Полная синхронизация реплик. Переключение на исходную топологию
22 октября 16:45: Решение вопроса с возросшей нагрузкой, вызванной накопившимися задачами
22 октября 23:03: Все ожидающие обработки веб-перехватчиков и сборки страниц были обработаны, а целостность и корректная работа всех систем подтверждены. Статус сайта был изменен на зеленый.

8. Последующие действия
- Устранение несоответствий в данных, которые не были реплицированы
- Изменение конфигурации Orchestrator, чтобы предотвратить распространение первичных баз данных через региональные границы
- Переход на новый механизм отчетности о состоянии дел, который предоставляет более обширную информацию об активных инцидентах
- Создание отказоустойчивой системы, позволяющей функционировать сервисам при отказе одного из центров обработки данных без ущерба для пользователей




